<html>
	<head>
		<link
			rel="icon"
			type="image/bmp"
			href="favicon.bmp" />
		<meta charset="UTF-8" />
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<script src="js/api.js"></script>
		<script src="js/base64.min.js"></script>
		<title>zyc2024的聊天网页主页</title>
	</head>
	<body>
		<div style="font-size: x-large; text-align: center">
			<h1>主页</h1>
			<h3 id="titlee">Loading...</h3>
		</div>
		<div style="display: flex; height: 80vh">
			<!-- Left side: Channel list -->
			<div
				id="channel-list"
				style="
					width: 48%;
					border-right: 1px solid #ccc;
					padding: 16px;
					overflow-y: auto;
					text-align: center;
				">
				<h2>创建新频道</h2>
				<input
					type="text"
					id="ch"
					placeholder="频道名称"
					style="width: 80%; padding: 8px; margin-bottom: 8px" />
				<button
					onclick="javascript:window.location.href='create.html?type=u&ch='+document.getElementById('ch').value">
					确定
				</button>
				<h2>频道列表</h2>
				<ul
					id="channels"
					style="list-style: none; padding: 0; margin: 0"></ul>
			</div>
			<div style="flex: 1; padding: 16px">
				<!-- 右半边内容 -->
				<h2>不公开的，适合自己用</h2>
				<br />
				<div id="id"></div>
				<br />
				<input
					type="text"
					id="key"
					placeholder="一串字符，作为凭证"
					style="width: 80%; padding: 8px; margin-bottom: 8px" />
				<button
					onclick="javascript:window.location.href='create.html?type=r&key='+document.getElementById('key').value">
					创建
				</button>
				<br />
				<br />
				<br />
				<input
					type="text"
					id="iddd"
					placeholder="生成的id"
					style="width: 80%; padding: 8px; margin-bottom: 8px" />

				<input
					type="text"
					id="keyyy"
					placeholder="你输入的凭证"
					style="width: 80%; padding: 8px; margin-bottom: 8px" />
				<button
					onclick="javascript:window.location.href='private.html?id=' +document.getElementById('iddd').value + '&key=' + document.getElementById('keyyy').value">
					创建
				</button>
			</div>
		</div>
		<script>
			//Generated by AI
			function renderChannels() {
				read("public/index.json").then(function (data) {
					var channels = data.ch || [];
					var ul = document.getElementById("channels");
					ul.innerHTML = "";
					channels.forEach(function (channel) {
						var link = document.createElement("a");
						link.textContent = channel;
						link.href = "public.html?ch=" + channel;
						link.style.padding = "8px 0";
						ul.appendChild(link);
						ul.appendChild(document.createElement("br"));
					});
				});
			}
			renderChannels();
		</script>
		<footer></footer>
	</body>
</html>
